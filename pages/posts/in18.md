---
title: In18国际化
date: 2026-01-14
updated: 2025-01-14
categories: [ In18 ]
tags:
  - In18
  - in18
  - 笔记
  - vue学习
top: 1
---

## In18 国际化

### 1、首先需要安装核心依赖，我使用的是pnpm所以命令是下面这样

``` cmd
 pnpm add vue-i18n@next
```

### 2、安装后就需要进行基础配置

``` javascript
  /**
  * 国际化配置
  */
  import { createI18n } from 'vue-i18n'
  import type { I18n, I18nOptions } from 'vue-i18n'
  import { LanguageEnum } from '@/enums/appEnum'

// 同步导入语言文件
import enMessages from './langs/en.json'
import zhMessages from './langs/zh.json'

/**
* 语言消息对象
  */
  const messages = {
  [LanguageEnum.EN]: enMessages,
  [LanguageEnum.ZH]: zhMessages,
  }

/**
* 语言选项列表
* 用于语言切换下拉框
  */
  export const languageOptions = [
  { value: LanguageEnum.ZH, label: '简体中文' },
  { value: LanguageEnum.EN, label: 'English' },
  ]

/**
* 从存储中获取语言设置
* @returns 语言设置，如果获取失败则返回默认语言
  */
  const getDefaultLanguage = (): LanguageEnum => {
  // 尝试从系统存储中获取语言设置（逻辑暂时未实现）

// 返回默认语言
console.debug('[i18n] 使用默认语言:', LanguageEnum.ZH)
return LanguageEnum.ZH
}

/**
* i18n 配置选项
  */
  const i18nOptions: I18nOptions = {
  locale: getDefaultLanguage(),
  legacy: false,
  globalInjection: true,
  fallbackLocale: LanguageEnum.ZH,
  messages
  }

/**
* i18n 实例
  */
  const i18n: I18n = createI18n(i18nOptions)

/**
* 翻译函数类型
  */
  interface Translation {
  (key: string): string
  }

/**
* 全局翻译函数
* 可在任何地方使用，无需导入 useI18n
  */
  export const $t = i18n.global.t as Translation

export default i18n
```

### 3、在入口文件中引入 i18n 实例并挂载到 Vue 实例上

``` javascript
import './assets/main.css'

import { createApp } from 'vue'
import { createPinia } from 'pinia'

import App from './App.vue'
import router from './router'        // 路由
import language from './locales'     // 国际化

import ElementPlus from 'element-plus'
import 'element-plus/dist/index.css'


const app = createApp(App)

app.use(createPinia())
app.use(router)
app.use(ElementPlus)
app.use(language)

app.mount('#app')
```

### 4、在需要翻译的地方使用 $t 函数进行翻译 就能够正常显示了

``` html
<template>
  <main>
    <p>{{ $t('httpMsg.unauthorized') }}</p>
  </main>
</template>
```

### 5、语言文件是这样的

``` json
// zh.json
{
  "httpMsg": {
    "unauthorized": "未授权访问，请重新登录",
    "forbidden": "禁止访问该资源",
    "notFound": "请求的资源不存在",
    "methodNotAllowed": "请求方法不允许",
    "requestTimeout": "请求超时，请稍后重试",
    "internalServerError": "服务器内部错误，请稍后重试",
    "badGateway": "网关错误，请稍后重试",
    "serviceUnavailable": "服务暂时不可用，请稍后重试",
    "gatewayTimeout": "网关超时，请稍后重试",
    "requestCancelled": "请求已取消",
    "networkError": "网络连接异常，请检查网络连接",
    "requestFailed": "请求失败",
    "requestConfigError": "请求配置错误"
  }
}

// en.json
{
  "httpMsg": {
    "unauthorized": "Unauthorized access, please login again",
    "forbidden": "Access to this resource is forbidden",
    "notFound": "The requested resource does not exist",
    "methodNotAllowed": "Request method not allowed",
    "requestTimeout": "Request timeout, please try again later",
    "internalServerError": "Internal server error, please try again later",
    "badGateway": "Bad gateway error, please try again later",
    "serviceUnavailable": "Service temporarily unavailable, please try again later",
    "gatewayTimeout": "Gateway timeout, please try again later",
    "requestCancelled": "Request cancelled",
    "networkError": "Network connection error, please check your connection",
    "requestFailed": "Request failed",
    "requestConfigError": "Request configuration error"
  }
}
```


